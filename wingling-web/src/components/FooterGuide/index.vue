<template>
  <div class="footer_guide">
    <Icon
      v-for="(item, index) in filteredNavbarList"
      :key="index"
      :name="item.text"
      :activeIcon="$route.path.substring(1)"
      :svgContent="item.svgContent"
      @clickHandler="goTo"
    />
  </div>
</template>

<script>
import router from "@/router";
import Icon from "../Icon/index.vue";
import { mapState } from "vuex";
export default {
  components: {
    Icon,
  },
  data() {
    return {
      navbarList: [
        {
          text: "statistics",
          requiresAdmin: false,
          svgContent:
            '<svg t="1690190484077" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="31378" width="36" height="36"><path class="p" d="M930 900c16.569 0 30 13.431 30 30 0 16.569-13.431 30-30 30H94c-16.569 0-30-13.431-30-30 0-16.569 13.431-30 30-30h836zM632 64c33.137 0 60 26.863 60 60v686c0 33.137-26.863 60-60 60H392c-33.137 0-60-26.863-60-60V124c0-33.137 26.863-60 60-60zM274 220c16.569 0 30 13.431 30 30 0 16.403-13.164 29.731-29.504 29.996L274 280H124v530h150c16.569 0 30 13.431 30 30 0 16.403-13.164 29.731-29.504 30H124c-32.806 0-59.462-26.328-59.992-59.008L64 810V280c0-32.806 26.328-59.462 59.008-59.992L124 220h150z m626 147l0.992 0.008C933.672 367.538 960 394.194 960 427v383l-0.008 0.992C959.462 843.672 932.806 870 900 870H749.504c-16.34-0.269-29.504-13.597-29.504-30 0-16.569 13.431-30 30-30h150V427H750l-0.496-0.004C733.164 426.731 720 413.403 720 397c0-16.569 13.431-30 30-30h150zM632 124H392v686h240V124z m171.1 353.4c30.8 0 51 14.4 51 41 0 14.8-8 26.4-24 32.8v1c16.6 5 28.8 17 28.8 36.2 0 27.8-25.4 43.4-55 43.4-23.6 0-40.2-8.2-51-20.8l16.4-22.4c9 8.6 19.4 14.4 31 14.4 13.8 0 22.8-5.8 22.8-17 0-12.8-6.8-20.4-38-20.4v-25c25.4 0 33.4-7.8 33.4-19.6 0-10.2-6-15.8-17-15.8-10 0-17.6 4.6-26.6 12.4l-18-21.8c13.8-11.6 28.6-18.4 46.2-18.4z m-587-148c28.8 0 48.8 18.4 48.8 46.8 0 25.6-22 53.8-44.8 76.8 7.4-1 17.6-2 24.2-2h27.4v30H168.5v-20.4c37.2-33.8 62.2-60.8 62.2-82.4 0-13.6-7.6-21-19.4-21-10.2 0-18.2 6.8-25.2 14.4l-19.4-19.2c14.6-15.4 28.2-23 49.4-23z m317.8-152.2v120h26.8V326h-94v-28.8h31.6v-84.6h-27.4v-22c16-3 26.4-7 36.8-13.4h26.2z" fill="#000000" p-id="31379"></path></svg>',
        },
        {
          text: "msite",
          requiresAdmin: false,
          svgContent:
            '<svg t="1690189701987" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1934" width="36" height="36" data-spm-anchor-id="a313x.7781069.0.i5"><path class="p" d="M774.0416 925.6448H253.0816c-86.4768 0-156.8256-70.3488-156.8256-156.8256V295.3728c0-86.4768 70.3488-156.8256 156.8256-156.8256h520.9088c86.4768 0 156.8256 70.3488 156.8256 156.8256v473.4464c0.0512 86.4768-70.2976 156.8256-156.7744 156.8256zM253.0816 210.2272c-46.9504 0-85.1456 38.1952-85.1456 85.1456v473.4464c0 46.9504 38.1952 85.1456 85.1456 85.1456h520.9088c46.9504 0 85.1456-38.1952 85.1456-85.1456V295.3728c0-46.9504-38.1952-85.1456-85.1456-85.1456H253.0816z" fill="#2c2c2c" p-id="1935"></path><path class="p" d="M895.0272 390.4H132.096c-19.8144 0-35.84-16.0256-35.84-35.84V295.3728c0-86.4768 70.3488-156.8256 156.8256-156.8256h520.9088c86.4768 0 156.8256 70.3488 156.8256 156.8256v59.1872c0.0512 19.8144-16.0256 35.84-35.7888 35.84z m-727.0912-71.68h691.2512v-23.3472c0-46.9504-38.1952-85.1456-85.1456-85.1456H253.0816c-46.9504 0-85.1456 38.1952-85.1456 85.1456v23.3472z" fill="#2c2c2c" p-id="1936"></path><path class= d="M339.968 278.0672c-19.8144 0-35.84-16.0256-35.84-35.84V127.4368c0-19.8144 16.0256-35.84 35.84-35.84s35.84 16.0256 35.84 35.84v114.7904c0 19.8144-16.0256 35.84-35.84 35.84zM687.1552 278.0672c-19.8144 0-35.84-16.0256-35.84-35.84V127.4368c0-19.8144 16.0256-35.84 35.84-35.84s35.84 16.0256 35.84 35.84v114.7904c0 19.8144-16.0768 35.84-35.84 35.84z" fill="#2c2c2c" p-id="1937"></path><path class="p" d="M486.5536 728.064c-14.2336 0-27.9552-5.888-37.7856-16.2304l-90.3168-95.1296a35.84 35.84 0 0 1 1.3312-50.688c14.336-13.6192 37.0688-13.056 50.688 1.3312l75.8272 79.872 147.2512-161.4848c13.312-14.6432 35.9936-15.6672 50.6368-2.3552 14.6432 13.312 15.6672 35.9936 2.3552 50.6368l-161.4336 177.0496c-9.728 10.6496-23.552 16.8448-37.9904 16.9984h-0.5632z" fill="#2c2c2c" p-id="1938" data-spm-anchor-id="a313x.7781069.0.i6"></path></svg>',
        },
        {
          text: "userManagement",
          requiresAdmin: true,
          svgContent: '<svg t="1691838694550" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15485" width="36" height="36"><path class="p" d="M634.9 952.3H143.4c-67.8 0-122.9-55.1-122.9-122.9v-81.9c0-158.1 128.6-286.7 286.7-286.7H471c158.1 0 286.7 128.6 286.7 286.7v81.9c0.1 67.8-55.1 122.9-122.8 122.9zM307.2 542.7c-112.9 0-204.8 91.9-204.8 204.8v81.9c0 22.6 18.4 41 41 41h491.5c22.6 0 41-18.4 41-41v-81.9c0-112.9-91.9-204.8-204.8-204.8H307.2zM913.2 849.9c-22.6 0-41-18.3-41-41s18.3-41 41-41c4.6 0 8.4-3.9 8.4-8.4v-49.4c0-59.1-48.1-107.2-107.2-107.2-22.6 0-41-18.3-41-41s18.3-41 41-41c104.3 0 189.1 84.8 189.1 189.1v49.4c0 50-40.5 90.5-90.3 90.5zM347.8 153.6c63.6 0 90.4 11.8 95.3 16.4 16.4 16.4 25.6 38 25.9 60.7 0.2 22-8 42.6-23.2 57.8-15 15-35.2 23.2-56.8 23.2-23.1 0-45-9.2-61.6-25.8-7.9-8.5-20.3-50.9-15.3-131.1 11-0.7 23.1-1.2 35.7-1.2m0-81.9c-30 0-58 2.3-78.3 4.5-18.9 2.1-33.9 17.1-36 36-6.5 58.6-13.3 182.4 35.8 231.5 33.2 33.2 76.6 49.9 119.6 49.9 41.8 0 83.2-15.7 114.7-47.2 64-64 62.8-168.9-2.6-234.3-32.1-32.2-96.3-40.4-153.2-40.4z" fill="#2c2c2c" p-id="15486"></path><path class="p" d="M389.1 633.7c-22.5 0-41 18.4-41 41v81.9c0 22.5 18.4 41 41 41 22.5 0 41-18.4 41-41v-81.9c0-22.6-18.5-41-41-41zM726.4 465.7c-22.6 0-41-18.3-41-41 0-22.6 18.3-41 41-41 33.4 0 60.5-30.2 60.5-67.4s-27.2-67.4-60.5-67.4c-2.1 0-4.1 0.1-6.1 0.3-22.4 2.5-42.8-13.6-45.3-36.1s13.6-42.8 36.1-45.3c5-0.6 10.2-0.9 15.4-0.9 78.5 0 142.5 67 142.5 149.3s-64.1 149.5-142.6 149.5z" fill="#2c2c2c" p-id="15487"></path></svg>'
        },
        {
          text: "clockManagement",
          requiresAdmin: true,
          svgContent: '<svg t="1691839066565" class="icon" viewBox="0 0 1065 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="19375" width="36" height="36"><path class="p" d="M971.352337 546.055573V198.349529a76.184497 76.184497 0 0 0-76.184497-76.184497h-115.800435v36.301913a19.046124 19.046124 0 0 1-38.092249 0V122.165032H284.491958v36.549512a19.046124 19.046124 0 1 1-38.092249 0V122.165032H133.32287a76.184497 76.184497 0 0 0-76.184497 76.184497v685.660473a76.184497 76.184497 0 0 0 76.184497 76.184497h482.381189c8.513618 13.446564 18.112864 26.09319 28.683463 37.882741H132.332471a114.276746 114.276746 0 0 1-114.276745-114.276745v-685.660474a114.276746 114.276746 0 0 1 114.276745-114.276745h114.067238v-39.425477a19.046124 19.046124 0 0 1 38.092249 0v39.425477H741.275156V44.190199a19.046124 19.046124 0 1 1 38.092249 0v39.673077h116.390865a114.276746 114.276746 0 0 1 114.276745 114.276745v368.675828A282.301654 282.301654 0 0 0 971.352337 546.055573z" fill="#170D0A" p-id="19376"></path><path class="p" d="M533.291479 312.626274h342.830237a19.046124 19.046124 0 1 1 0 38.092249H533.291479a19.046124 19.046124 0 0 1 0-38.092249zM533.291479 464.995268h342.830237a19.046124 19.046124 0 1 1 0 38.092249H533.291479a19.046124 19.046124 0 0 1 0-38.092249z" fill="#170D0A" p-id="19377"></path><path class="p" d="M1012.606242 723.62259v68.642231l-59.957199 12.284751a177.052771 177.052771 0 0 1-17.731942 43.310886l33.864009 51.329305-0.09523 0.095231-48.11051 48.434294-0.095231 0.09523-50.986475-34.092562a174.081576 174.081576 0 0 1-42.834733 17.846218l-12.189519 60.357168h-68.185125l-12.18952-60.357168a175.871911 175.871911 0 0 1-42.834733-17.846218l-51.081706 34.092562-48.300971-48.624755 33.883055-51.329305a179.623998 179.623998 0 0 1-17.731941-43.310886l-59.957199-12.284751v-68.642231l59.957199-12.265704a172.081733 172.081733 0 0 1 17.827172-43.310887l-33.883055-51.329305 48.300971-48.624755 50.986475 34.016378a175.490989 175.490989 0 0 1 42.834733-17.865265l12.18952-60.280983h68.204171l12.170473 60.376214a174.805328 174.805328 0 0 1 42.834733 17.846218l50.986475-34.092562 0.095231 0.076184 48.129556 48.453341 0.171415 0.09523-33.883055 51.329305c7.808911 13.579887 13.770348 28.150172 17.750988 43.310887l59.861968 12.265704z m-231.962747-88.335925c-67.251865-0.076184-121.819011 54.738561-121.895195 122.428487-0.076184 67.708972 54.376685 122.65704 121.609503 122.733225 67.251865 0.076184 121.819011-54.757607 121.895195-122.447533 0.076184-67.689926-54.376685-122.637994-121.609503-122.714179z m-371.970807 97.059049c-40.111138 40.415876-80.29846 80.774613-120.314367 121.304766-3.333072 3.371164-5.275776 3.656856-8.475525 0.68566l-0.685661-0.647568-0.057138-0.057138a13764.253076 13764.253076 0 0 0-43.710855-44.167962c-13.294195-13.389425-26.607436-26.740758-39.920677-40.111138-1.352275-1.371321-2.952149-2.495042-3.847317-3.256887l0.323784-0.323784-0.609475-0.628523 28.416817-28.626324 0.609476 0.628522 0.114277-0.095231 62.566518 63.023625 102.639563-103.382362c8.094603 8.170787 15.560684 15.67496 22.969626 23.198179 3.580671 3.63781 5.294823 4.951992 5.180546 6.361406l0.228554 0.228553-0.438061 0.476153c-0.571384 1.161814-2.190304 2.571227-4.990085 5.390053z m-129.532691 121.28572z m0 0z m-0.818983-0.761845c-12.018104-12.265704-24.112393-24.455224-36.206682-36.663789a13764.253076 13764.253076 0 0 1 37.025665 37.425634c-0.266646-0.2476-0.533291-0.457107-0.818983-0.761845z m68.032756-468.534657l-62.147504 62.566518-90.888105-91.497581 26.835989-27.007404 62.947441 64.147347 102.791933-103.515686 27.350234 27.750203c-0.476153 0.761845-1.218952 1.466552-1.980797 2.247443a69878.249093 69878.249093 0 0 0-64.909191 65.30916z m-127.056695 118.181201l0.228553 0.228554c-0.152369-0.019046-0.285692-0.038092-0.438061-0.019047l0.209508-0.209507z m62.814117 93.040317l0.571384-0.571384 1.409413 1.314183 102.144365-102.963348 26.474112 26.969312c-0.019046 0.476153-0.095231 0.990398-0.152369 1.504644l-128.84703 129.723152-91.440443-92.068964 26.816943-26.988358h0.438061l62.585564 63.080763z" fill="#180C09" p-id="19378"></path></svg>'
        },
        {
          text: "profile",
          requiresAdmin: false,
          svgContent:
            '<svg t="1690190382401" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="27476" width="36" height="36"><path class="p" d="M512.36 1023.25C230.26 1023.25 0.74 793.73 0.74 511.64 0.74 229.52 230.26 0 512.36 0 794.48 0 1024 229.52 1024 511.64c0 282.09-229.52 511.61-511.64 511.61z m0-938.34c-235.3 0-426.71 191.43-426.71 426.73s191.42 426.7 426.71 426.7 426.73-191.4 426.73-426.7S747.66 84.91 512.36 84.91z" fill="#333333" p-id="27477"></path><path class="p" d="M512.36 857.39c-101.16 0-169.37-31.5-208.55-96.31-22.36-37.04-22.34-82.99 0.04-119.95 44.51-73.55 122.42-117.48 208.42-117.48 85.97 0 163.93 43.9 208.55 117.4 22.49 37.04 22.5 83.04 0.04 120.11-39.25 64.76-107.45 96.23-208.5 96.23z m-0.09-252.74c-57.41 0-109.41 29.32-139.13 78.43-6.74 11.13-6.74 24.97 0 36.12 23.58 39.02 67.83 57.21 139.23 57.21 71.34 0 115.58-18.19 139.24-57.21 6.75-11.15 6.75-24.99-0.01-36.12-29.82-49.12-81.9-78.43-139.33-78.43zM512.37 490.89c-82.25 0-149.16-66.91-149.16-149.16s66.91-149.16 149.16-149.16h149.16v149.16c0.01 82.25-66.9 149.16-149.16 149.16z m0-217.34c-37.59 0-68.18 30.58-68.18 68.18s30.58 68.18 68.18 68.18 68.18-30.58 68.18-68.18v-68.18h-68.18z" fill="#333333" p-id="27478"></path></svg>',
        }
      ],
    };
  },
  methods: {
    goTo(name) {
      const paths = document.querySelectorAll(".active .icon .p");
      paths.forEach((path) => {
        const len = path.getTotalLength();
        path.style.setProperty("--l", len);
      });
      if (router.currentRoute.path !== `/${name}`) {
        router.replace(name);
      }
    },
  },
  computed: {
    ...mapState("user", ["info"]),
    filteredNavbarList() {
      if (this.info.isAdmin) {
        return this.navbarList;
      } else {
        return this.navbarList.filter(item => !item.requiresAdmin);
      }
    }
  }
};
</script>

<style scoped>
.footer_guide {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 96px;
  width: 100%;
  z-index: 100;
  display: flex;
  border-top-left-radius: 25px;
  justify-content: space-around;
  align-items: center;
  border-top-right-radius: 25px;
  background-color: #fff;
  box-shadow: 0 -4px 4px -4px rgba(0, 0, 0, 0.5);
}
</style>
<style>
.active .p {
  fill: none;
  stroke: #fff; /* 橙色描边 */
  stroke-width: 40;
  stroke-dasharray: var(--l);
  stroke-dashoffset: 0;
}


.p {
  stroke: #000;
  stroke-dasharray: var(--l);
  stroke-dashoffset: var(--l);
  transition: all 4s;
}
</style> 