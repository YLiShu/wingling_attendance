<template>
  <div class="addUser">
    <div class="addUser_header">
      <div class="header_left">
        <img src="/assets/images/logo.png" alt="logo-img" />
        <div class="header_title_company">翼灵物联网工作室</div>
      </div>
      <div class="header_right">
        <div class="svg">
          <svg
            t="1692622457756"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="20918"
            width="40"
            height="40"
          >
            <path
              d="M488.190373 660.585421c-62.488731 176.104606 404.131668 52.660958 403.734013 179.711911 73.452663-84.956271 117.87647-195.703345 117.87647-316.817868 0-145.059069-63.738506-275.262862-164.743019-364.082072h-0.028404s-311.39271 9.799369-311.39271 146.138419 414.697944 28.403969 380.613182 164.743019-363.5708 14.201984-426.059532 190.306591zM283.681798 771.3609c68.169525-255.635719-198.827782-232.912544-193.146988-326.645641s198.827782 2.840397 218.71056-110.775479-132.788554-147.07575-132.788554-147.07575l-0.028404-0.028404c-84.189363 87.17178-135.998203 205.871966-135.998203 336.643838 0 147.473406 65.868804 279.551861 169.798926 368.456283 33.857531-31.389226 60.18801-70.867902 73.452663-120.574847z"
              fill="#20CE55"
              p-id="20919"
            ></path>
            <path
              d="M341.824722 74.639949c-62.801175 25.677188-119.012629 64.164565-165.39631 112.195677l0.028404 0.028404s152.671332 33.459875 132.788554 147.07575-213.029766 17.042381-218.71056 110.775479 261.316513 71.009922 193.146988 326.645641c-13.264653 49.706945-39.595132 89.188462-73.452663 120.574847 44.764655 38.316954 96.630302 68.623989 153.324623 88.648787v-0.028404c170.793064-120.319212 331.531124-3.067629 331.531124-3.067629v0.028404c76.71912-28.716412 144.235354-76.349868 196.839504-137.219573 0.397656-127.050952-466.222744-3.607304-403.734013-179.711911s391.974769-53.967541 426.059532-190.306591-380.613182-28.403969-380.613182-164.743019 311.39271-146.138419 311.39271-146.138419c-39.538325-34.794862-84.814251-63.255638-134.208752-83.7349v0.028404s-154.574398 108.986028-368.967555-0.994139l-0.028404-0.056808z"
              fill="#1AA5E2"
              p-id="20920"
            ></path>
            <path
              d="M891.927226 854.499316h-0.045446a14.201984 14.201984 0 0 1-14.156538-14.24743c0.139179-44.599912-93.187741-50.144366-183.444192-55.507036-11.685393-0.693057-23.407711-1.391794-35.013573-2.172904a14.201984 14.201984 0 0 1 1.911587-28.34148c11.529171 0.778269 23.174798 1.468485 34.786341 2.158702 51.67534 3.070469 100.487561 5.970514 138.565921 15.74716 47.610732 12.225068 71.700138 35.172635 71.597884 68.200769a14.207665 14.207665 0 0 1-14.201984 14.162219zM617.692588 779.118023a14.798468 14.798468 0 0 1-1.454283-0.07385 681.371446 681.371446 0 0 1-24.734176-2.939811 14.201984 14.201984 0 0 1 3.899865-28.134131c7.396393 1.025383 15.153517 1.948512 23.711633 2.817674a14.201984 14.201984 0 0 1-1.423039 28.330118zM536.871935 763.867933a14.182102 14.182102 0 0 1-4.567358-0.758386c-29.409469-9.986835-48.258343-24.242787-57.628812-43.58305-8.606403-17.761002-8.563797-39.188956 0.130658-63.690219 36.220741-102.078183 151.503929-112.130348 253.215701-120.998067 17.914383-1.562218 34.837468-3.036384 51.257802-4.970694a14.201984 14.201984 0 1 1 3.317584 28.210821c-16.846394 1.982597-33.973987 3.473805-52.109921 5.055907-97.738057 8.521191-198.802218 17.332102-228.916106 102.20032-6.143778 17.312219-6.5812 30.98589-1.337827 41.804961 5.885302 12.145537 19.362986 21.658026 41.202797 29.074303a14.199144 14.199144 0 0 1 8.879081 18.013797 14.201984 14.201984 0 0 1-13.443599 9.640307zM867.638992 537.584875a14.204825 14.204825 0 0 1-6.067088-27.05194c21.635303-10.202706 33.99671-24.086566 38.899236-43.699506 3.828855-15.31542-0.102254-23.120831-3.394275-27.659785-19.553292-26.975249-95.596397-32.406088-162.683731-37.194997-49.888731-3.561858-101.476019-7.245852-141.011503-18.880118-49.067856-14.440578-73.949733-40.535304-73.949733-77.562718 0-148.393695 311.869897-159.917185 325.148752-160.334723l0.445943-0.00568a14.216186 14.216186 0 0 1 14.216186 14.201984 14.190623 14.190623 0 0 1-13.88386 14.199144c-3.445401 0.122137-78.840896 3.0023-152.961053 21.61542-65.948335 16.562354-144.56484 49.144547-144.564839 110.323855 0 54.643555 95.866235 61.488912 188.579629 68.109877 80.397434 5.740442 156.335444 11.1656 183.660063 48.857667 10.239631 14.128134 12.915285 31.360822 7.95027 51.218036-6.933409 27.739316-25.217043 48.766774-54.342473 62.500093a14.065645 14.065645 0 0 1-6.041524 1.363391zM210.231975 906.137732a14.201984 14.201984 0 0 1-9.657349-24.61772c34.394366-31.886295 57.739588-70.180526 69.385215-113.820384 23.953067-89.827551 8.631966-150.256995-49.681382-195.936257a14.201984 14.201984 0 0 1 17.516727-22.362445c67.595765 52.953519 86.535531 124.645136 59.608569 225.618405-13.048783 48.905953-39.132148 91.744819-77.520111 127.329311a14.142336 14.142336 0 0 1-9.651669 3.78909zM181.245725 543.867833a14.145176 14.145176 0 0 1-6.944771-1.823535c-5.854058-3.28918-11.656989-6.453382-17.329261-9.549414-42.801941-23.353743-83.23215-45.409425-80.613304-88.637425 1.582101-26.097567 15.250091-43.781877 40.629037-52.564385 19.786205-6.848197 44.105683-7.632146 69.853881-8.464383 62.216053-2.008161 100.558571-6.464743 108.412268-51.337333 7.123715-40.711408-10.361768-74.807533-51.973582-101.333999-33.150272-21.132553-69.515873-29.3413-69.879444-29.423671a14.199144 14.199144 0 1 1 6.095491-27.742156c1.658792 0.363571 41.038054 9.171642 78.400635 32.800903 51.948019 32.85203 74.540535 78.0115 65.337649 130.595767-12.401173 70.859381-80.641708 73.060689-135.475569 74.830256-56.404601 1.820694-81.306361 5.618305-83.047524 34.357441-1.454283 23.998513 24.080885 39.188956 65.865963 61.985981a1637.744436 1637.744436 0 0 1 17.638865 9.719838 14.201984 14.201984 0 0 1-6.970334 26.586115z"
              fill="#333333"
              p-id="20921"
            ></path>
            <path
              d="M239.428415 523.479464c0-50.703925 7.830974-99.572953 22.277232-145.507851a137.140042 137.140042 0 0 0 40.242743 6.010279c75.776108 0 137.205371-61.429263 137.205371-137.205371 0-34.025114-12.412534-65.133141-32.920199-89.111771 61.241797-53.257441 135.949916-91.426695 218.381073-108.616777a484.58591 484.58591 0 0 0-99.499102-10.253832c-78.994278 0-153.571738 18.911362-219.463265 52.436566a138.230755 138.230755 0 0 0-20.587197-1.542335c-73.094773 0-132.816958 57.162987-136.955416 129.221015-67.325927 83.23215-107.676605 189.184634-107.676605 304.572917 0 267.679002 217.006322 484.685323 484.685323 484.685324 34.113167 0 67.374214-3.522092 99.499103-10.253833-219.963175-45.87525-385.189061-240.868496-385.189061-474.434331z"
              opacity=".25"
              p-id="20922"
            ></path>
            <path
              d="M363.56796 994.760955a14.201984 14.201984 0 0 1-8.191704-25.813527c92.997434-65.513754 183.171514-62.582464 242.439235-48.587829a14.201984 14.201984 0 1 1-6.527232 27.642742c-77.963214-18.408612-151.827734-3.550496-219.556998 44.165331a14.130974 14.130974 0 0 1-8.163301 2.593283zM695.07352 991.690486a14.119613 14.119613 0 0 1-8.345086-2.721101c-0.403336-0.292561-21.652345-15.505727-55.89901-28.710731a14.199144 14.199144 0 0 1-8.140578-18.360326 14.201984 14.201984 0 0 1 18.360326-8.143418c38.14369 14.704735 61.432104 31.545448 62.406359 32.255547a14.201984 14.201984 0 0 1-8.382011 25.680029zM534.32978 137.923992c-55.455909 0-123.614072-11.938188-198.95844-50.590309l12.963572-25.271011c85.464702 43.844366 170.980531 57.549281 254.172914 40.742653 62.201851-12.568756 99.777462-38.476016 100.149554-38.737333l16.343644 23.231606c-1.675834 1.181605-41.839046 29.111228-109.400727 43.049055-21.155276 4.36285-46.505818 7.575338-75.270517 7.575339z"
              fill="#333333"
              p-id="20923"
            ></path>
            <path
              d="M525.115533 1022.366772c-57.060733 0-113.010871-9.552255-166.293876-28.392607-57.867406-20.439496-110.968625-51.141346-157.826653-91.250591-111.065199-95.005595-174.76678-233.236349-174.766779-379.24411 0-129.982242 49.712626-253.039596 139.983279-346.508536 48.573627-50.297748 105.85023-89.148696 170.239187-115.476336 59.966459-24.487061 123.440808-36.902436 188.664842-36.902436 66.238055 0 130.550321 12.770424 191.155869 37.956224 50.436927 20.913842 96.920022 49.911454 138.139862 86.189003l-18.763662 21.322859c-38.876512-34.20974-82.703836-61.557081-130.266281-81.277957-57.140264-23.745718-117.788418-35.78616-180.265788-35.78616-61.522996 0-121.384361 11.705276-177.922461 34.792021-60.713483 24.825069-114.732151 61.469029-160.550593 108.912178-85.129535 88.146036-132.013126 204.198972-132.013126 326.77914 0 137.693919 60.077234 268.056775 164.828231 357.662775 44.193735 37.828406 94.264251 66.777731 148.822595 86.049823 50.24094 17.763842 103.004152 26.770741 156.832513 26.770741 56.82498 0 112.334856-10.006718 164.984453-29.744636 73.455504-27.495042 139.528816-73.554918 191.079179-133.206093 73.78783-85.342565 114.419707-194.558665 114.419707-307.53261 0-135.231295-58.287784-264.046134-159.920025-353.416382l18.757981-21.33138c107.761817 94.761321 169.566013 231.353166 169.566013 374.747762 0 119.793738-43.091661 235.608081-121.336074 326.105966-54.652076 63.238596-124.710465 112.07638-202.605509 141.230213-55.836522 20.936565-114.700907 31.551129-174.942884 31.551129z"
              fill="#333333"
              p-id="20924"
            ></path>
            <path
              d="M151.407356 153.043424m-137.205372 0a137.205371 137.205371 0 1 0 274.410743 0 137.205371 137.205371 0 1 0-274.410743 0Z"
              fill="#FCBC1D"
              p-id="20925"
            ></path>
            <path
              d="M14.201984 153.034903c0 75.781789 61.409381 137.219573 137.19117 137.219573 11.759243 0 23.206043-1.477006 34.084762-4.260595-59.279083-15.167719-103.106407-68.936432-103.106407-132.958978s43.827324-117.762855 103.106407-132.930574c-10.87872-2.783589-22.325519-4.260595-34.084762-4.260595-75.781789 0-137.191169 61.409381-137.19117 137.191169z"
              opacity=".25"
              p-id="20926"
            ></path>
            <path
              d="M135.98116 199.020929c0 17.212805 13.463481 31.27277 30.420651 32.238504-4.828675-5.623986-7.697476-12.923806-7.697476-20.876917 0-17.837692 14.45762-32.295313 32.295313-32.295312 0.624887 0 1.249775 0.028404 1.874662 0.056807a32.045358 32.045358 0 0 0-24.597837-11.418395c-17.837692 0-32.295313 14.45762-32.295313 32.295313z"
              opacity=".47"
              p-id="20927"
            ></path>
            <path
              d="M168.270792 245.521066c-25.634582 0-46.491616-20.857034-46.491616-46.491616s20.854194-46.491616 46.491616-46.491616S214.762408 173.394868 214.762408 199.02945a14.201984 14.201984 0 0 1-28.403969 0c0-9.972633-8.115014-18.087647-18.087647-18.087648s-18.087647 8.115014-18.087647 18.087648 8.112173 18.087647 18.087647 18.087647a14.201984 14.201984 0 0 1 0 28.403969zM146.678095 140.787112c-0.937331 0-1.846258-0.085212-2.783589-0.28404-0.908927-0.170424-1.78945-0.454464-2.641569-0.795311-0.852119-0.369252-1.675834-0.795311-2.471145-1.306583-0.766907-0.511271-1.477006-1.107755-2.158702-1.761046a14.304239 14.304239 0 0 1-4.14698-10.055005c0-0.908927 0.085212-1.846258 0.28404-2.755185 0.170424-0.908927 0.454464-1.817854 0.795311-2.669973 0.369252-0.852119 0.795311-1.675834 1.306583-2.442741 0.511271-0.795311 1.107755-1.50541 1.761046-2.158702 0.681695-0.653291 1.391794-1.249775 2.158702-1.78945 0.795311-0.511271 1.619026-0.937331 2.471145-1.278178 0.852119-0.369252 1.732642-0.653291 2.641569-0.823715 4.629847-0.937331 9.51533 0.568079 12.838594 3.891343 0.653291 0.653291 1.221371 1.363391 1.761046 2.158702 0.511271 0.766907 0.937331 1.590622 1.306582 2.442741 0.340848 0.852119 0.624887 1.761046 0.795312 2.669973 0.198828 0.908927 0.28404 1.846258 0.284039 2.755185 0 3.749324-1.50541 7.413436-4.146979 10.055005-2.669973 2.641569-6.305681 4.146979-10.055005 4.14698zM138.810195 81.138777c-3.72092 0-7.385032-1.50541-10.026601-4.146979-0.653291-0.653291-1.249775-1.391794-1.761046-2.158702s-0.965735-1.590622-1.306582-2.442741c-0.369252-0.880523-0.624887-1.761046-0.823715-2.669973-0.170424-0.908927-0.28404-1.846258-0.28404-2.783589 0-0.908927 0.113616-1.846258 0.28404-2.755185a14.522949 14.522949 0 0 1 3.891343-7.271416c0.653291-0.653291 1.363391-1.249775 2.158702-1.761046a14.522949 14.522949 0 0 1 5.112714-2.130298 13.986114 13.986114 0 0 1 8.208747 0.823715c0.852119 0.340848 1.675834 0.795311 2.442742 1.306583s1.50541 1.107755 2.158701 1.761046 1.249775 1.363391 1.761046 2.158701a14.522949 14.522949 0 0 1 2.130298 5.112715c0.170424 0.908927 0.255636 1.846258 0.255636 2.755185 0 3.749324-1.50541 7.413436-4.14698 10.055005-2.641569 2.641569-6.305681 4.146979-10.055005 4.146979zM87.683052 123.74473c-3.72092 0-7.385032-1.50541-10.026601-4.146979s-4.175383-6.305681-4.175384-10.055005c0-3.72092 1.533814-7.385032 4.175384-10.026601a14.3156 14.3156 0 0 1 10.026601-4.175383c3.749324 0 7.413436 1.533814 10.055005 4.175383s4.146979 6.305681 4.146979 10.026601c0 3.749324-1.50541 7.413436-4.146979 10.055005-2.641569 2.641569-6.305681 4.146979-10.055005 4.146979z"
              fill="#333333"
              p-id="20928"
            ></path>
            <path
              d="M751.597418 174.800864a14.145176 14.145176 0 0 1-7.524211-2.167222 414.220758 414.220758 0 0 0-52.467811-27.83305 14.201984 14.201984 0 0 1 11.469522-25.98395 442.670173 442.670173 0 0 1 56.075115 29.747476 14.201984 14.201984 0 0 1-7.552615 26.236746zM817.204905 850.082499a14.201984 14.201984 0 0 1-9.705636-24.572273c83.436658-78.059787 131.291665-188.147889 131.291665-302.030762 0-114.533323-45.929218-221.141939-129.328951-300.184504a14.201984 14.201984 0 0 1 19.53909-20.618441c89.114612 84.459201 138.193829 198.38752 138.19383 320.800105 0 121.716687-51.132825 239.363085-140.290042 322.771339a14.130974 14.130974 0 0 1-9.699956 3.834536zM757.468518 896.841113a14.201984 14.201984 0 0 1-7.745762-26.114609 418.129144 418.129144 0 0 0 21.371146-14.846755 14.201984 14.201984 0 0 1 16.925925 22.811227 444.124456 444.124456 0 0 1-22.83395 15.857936 14.119613 14.119613 0 0 1-7.717359 2.292201zM220.309703 236.144916a14.201984 14.201984 0 0 1-10.043643-24.245628c19.553292-19.553292 28.080164-47.508478 22.811227-74.784809a14.201984 14.201984 0 0 1 27.887017-5.388233c7.061227 36.547387-4.382732 74.026423-30.613798 100.257488a14.148017 14.148017 0 0 1-10.040803 4.161182zM220.301182 98.351582c-0.908927 0-1.846258-0.113616-2.755185-0.284039-0.908927-0.170424-1.817854-0.454464-2.669973-0.823715-0.852119-0.340848-1.675834-0.795311-2.442741-1.306583-0.795311-0.511271-1.50541-1.107755-2.158702-1.761046a14.264473 14.264473 0 0 1-4.175383-10.026601c0-0.937331 0.085212-1.874662 0.284039-2.783589 0.170424-0.908927 0.454464-1.78945 0.823715-2.641569 0.340848-0.880523 0.766907-1.704238 1.306583-2.471145 0.511271-0.766907 1.107755-1.50541 1.761046-2.158702s1.363391-1.249775 2.158702-1.761046c0.766907-0.511271 1.590622-0.937331 2.442741-1.306583 0.852119-0.340848 1.761046-0.624887 2.669973-0.795311 1.817854-0.369252 3.692516-0.369252 5.538774 0a14.162219 14.162219 0 0 1 5.112714 2.101894c0.766907 0.511271 1.50541 1.107755 2.158702 1.761046 0.653291 0.653291 1.249775 1.391794 1.761046 2.158702s0.937331 1.590622 1.306583 2.471145c0.340848 0.852119 0.624887 1.732642 0.795311 2.641569 0.198828 0.908927 0.28404 1.846258 0.284039 2.783589 0 3.749324-1.50541 7.385032-4.146979 10.026601a14.258792 14.258792 0 0 1-4.629847 3.067629c-0.852119 0.369252-1.732642 0.653291-2.641569 0.823715-0.908927 0.170424-1.846258 0.28404-2.783589 0.284039z"
              fill="#FFFFFF"
              p-id="20929"
            ></path>
            <path
              d="M151.407356 304.45078C67.922411 304.45078 0 236.53121 0 153.043424S67.922411 1.636069 151.407356 1.636069s151.407356 67.922411 151.407355 151.407355-67.91957 151.407356-151.407355 151.407356z m0-274.410743C83.584359 30.040037 28.403969 85.217587 28.403969 153.043424s55.18039 123.003387 123.003387 123.003387S274.410742 220.869261 274.410742 153.043424 219.233193 30.040037 151.407356 30.040037z"
              fill="#333333"
              p-id="20930"
            ></path>
          </svg>
        </div>
        <div class="header_current_count">新增成员</div>
      </div>
    </div>
    <div class="main">
      <div class="main_content">
        <div class="main_title">主要信息</div>
        <div class="info_content">
          <div class="title">学号</div>
          <InputBox
            imgSrc="/assets/images/userManagement/username.png"
            placeholder="学号"
            v-model="username"
            :minlength="12"
            tips="请正确输入学号"
          />
        </div>
        <div class="info_content">
          <div class="title">姓名</div>
          <InputBox
            imgSrc="/assets/images/userManagement/name.png"
            placeholder="姓名"
            v-model="realname"
            :minlength="2"
            tips="请正确输入姓名"
          />
        </div>
        <div class="info_content">
          <div class="title">年级</div>
          <InputBox
            imgSrc="/assets/images/userManagement/grade.png"
            placeholder="年级"
            v-model="grade"
            :minlength="2"
            tips="请正确输入年级"
          />
        </div>
        <div class="info_content">
          <div class="title">邮箱</div>
          <InputBox
            imgSrc="/assets/images/userManagement/email.png"
            placeholder="邮箱"
            v-model="email"
            :minlength="5"
            tips="请正确输入邮箱"
          />
        </div>
        <div class="info_content">
          <div class="title">职位</div>
          <InputBox
            imgSrc="/assets/images/userManagement/admin.png"
            placeholder="职位"
            v-model="isAdmin"
            :minlength="2"
            tips="请正确输入职位"
          />
        </div>
        <div class="info_content">
          <div class="title">目标</div>
          <InputBox
            imgSrc="/assets/images/userManagement/target.png"
            placeholder="目标"
            v-model="targetTime"
            :minlength="2"
            tips="请正确输入目标打卡时长"
          />
        </div>
      </div>

      <div class="addUser_footer">
        <div class="footer_left">
          <label @click="saveDraft">
            <svg
              t="1690536644231"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="3631"
              width="30"
              height="30"
            >
              <path
                d="M904.533333 972.8H290.133333c-37.717333 0-68.266667-30.549333-68.266666-68.266667V373.077333c0-37.717333 30.549333-68.266667 68.266666-68.266666h614.4c37.717333 0 68.266667 30.549333 68.266667 68.266666V904.533333c0 37.717333-30.549333 68.266667-68.266667 68.266667z"
                fill="#333333"
                opacity=".3"
                p-id="3632"
              ></path>
              <path
                d="M897.194667 468.821333h-24.576V126.805333c0-51.2-41.472-92.672-92.672-92.672H244.053333c-51.2 0-92.672 41.472-92.672 92.672v342.016H126.805333c-51.2 0-92.672 41.472-92.672 92.501334v335.872c0 51.2 41.472 92.672 92.672 92.672h770.56c51.029333 0 92.672-41.472 92.672-92.672V561.322667a92.859733 92.859733 0 0 0-92.842666-92.501334zM202.581333 126.805333C202.581333 103.936 221.184 85.333333 244.053333 85.333333h535.893334c22.869333 0 41.472 18.602667 41.472 41.472v342.016h-109.056c-14.165333 0-25.6 11.434667-25.6 25.6v123.221334H352.597333v-123.221334c0-14.165333-11.434667-25.6-25.6-25.6h-124.416V126.805333zM938.666667 897.365333c0 22.869333-18.602667 41.472-41.472 41.472H126.805333C103.936 938.666667 85.333333 920.064 85.333333 897.365333V561.322667c0-22.869333 18.602667-41.472 41.472-41.472h174.592v123.221333c0 14.165333 11.434667 25.6 25.6 25.6h385.365334c14.165333 0 25.6-11.434667 25.6-25.6v-123.221333h159.232c22.869333 0 41.472 18.602667 41.472 41.472v336.042666z"
                fill="#333333"
                p-id="3633"
              ></path>
              <path
                d="M313.173333 266.581333h397.824c14.165333 0 25.6-11.434667 25.6-25.6s-11.434667-25.6-25.6-25.6H313.173333c-14.165333 0-25.6 11.434667-25.6 25.6s11.434667 25.6 25.6 25.6zM554.666667 386.730667c0-14.165333-11.434667-25.6-25.6-25.6H313.173333c-14.165333 0-25.6 11.434667-25.6 25.6s11.434667 25.6 25.6 25.6H529.066667c14.165333 0 25.6-11.434667 25.6-25.6z"
                fill="#333333"
                p-id="3634"
              ></path>
            </svg>
            <div class="title">存草稿</div>
          </label>
        </div>
        <div class="footer_right">
          <button class="btn-send" @click="submitApplication">提交</button>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
import InputBox from "@/components/InputBox/index.vue";
import showNotice from "@/utils/notice";
import { saveCard, getCard, clearCard } from "@/utils/cardCache";
import { createUser } from "@/apis/userManagement/index";

export default {
  data() {
    return {
      username: "",
      realname: "",
      grade: "",
      email: "",
      isAdmin: "",
      targetTime: "",
    };
  },
  components: {
    InputBox,
  },
  methods: {
    saveDraft() {
      if (
        this.username === "" &&
        this.realname === "" &&
        this.grade === "" &&
        this.email == "" &&
        this.isAdmin == "" &&
        this.targetTime == ""
      ) {
        return showNotice("warning", "你还没有填写任何东西哦");
      }
      const params = {
        username: this.username,
        realname: this.realname,
        grade: this.grade,
        email: this.email,
        isAdmin: this.isAdmin,
        targetTime: this.targetTime,
      };
      saveCard(params, 'createUser');
      showNotice("success", "保存成功");
    },
    async submitApplication() {
      let isAdmin = null;
      if (this.isAdmin === "队长") {
        isAdmin = true;
      } else if (isAdmin === "队员") {
        isAdmin = false;
      }
      const params = {
        username: this.username,
        realname: this.realname,
        grade: this.grade,
        email: this.email,
        isAdmin: isAdmin,
        password: "52101314",
        targetTime: Number(this.targetTime)
      };
      try {
        await createUser(params);
        showNotice("success", "创建用户成功");
        clearCard('createUser');
      } catch (err) {
        console.warn(err);
      } finally {
        this.username = "";
        this.realname = "";
        this.grade = "";
        this.email = "";
        this.isAdmin = "";
        this.targetTime = "";
      }
    },
  },
  created() {
    const params = getCard('createUser');
    if (!params) return;
    this.username = params.username;
    this.realname = params.realname;
    this.grade = params.grade;
    this.email = params.email;
    this.isAdmin = params.isAdmin;
    this.targetTime = params.targetTime;
  },
};
</script>

<style lang="scss" scoped>
.addUser {
  display: flex;
  flex-direction: column;
  height: 100%;

  .addUser_header {
    display: flex;
    height: 120px;
    background-color: #fff;
    align-items: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    justify-content: space-between;
    border-radius: 10px;
    margin-top: 5px;
    margin-bottom: 5px;

    .header_left {
      margin-left: 20px;
      display: flex;
      align-items: center;

      img {
        width: 55px;
        height: 55px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        border-radius: 10px;
        margin-right: 10px;
      }
      .header_title_company {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 5px;
      }
    }

    .header_right {
      display: flex;
      align-content: center;
      justify-content: center;
      align-items: center;
      margin-right: 20px;
      flex-direction: column;

      .svg {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 50px;
        height: 50px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        border-radius: 8px;
      }

      .header_current_count {
        margin-top: 5px;
        font-size: 14px;
        color: #999;
        text-align: center;
      }
    }
  }

  .main {
    box-sizing: border-box;
    padding: 5px;
    position: relative;
    background-color: #fff;
    border-radius: 10px;
    height: 100%;
    overflow: auto;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);

    .main_content {
      box-sizing: border-box;
      padding: 15px;

      .main_title {
        font-weight: bolder;
      }

      .info_content {
        margin-top: 10px;

        .title {
          color: #999;
          margin-bottom: 5px;
        }

        .input-box {
          margin-bottom: 0 !important;
        }
      }
    }

    .addUser_footer {
      position: relative;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      height: 60px;
      align-items: center;
      width: 100%;
      box-sizing: border-box;

      .footer_left {
        flex: 1;
        flex-shrink: 0;
        min-width: 50px;

        &:active {
          color: #000;
          font-weight: bolder;
        }

        label {
          display: flex;
          flex-direction: column;
          height: 100%;
          justify-content: center;
          align-items: center;

          .title {
            font-size: 14px;
            color: #808080;
          }
        }
      }

      .footer_right {
        flex: 5;
        padding: 5px;
        box-sizing: border-box;
        .btn-send {
          width: 100%;
          padding: 10px;
          border: none;
          border-radius: 10px;
          background: #21a1f1;
          color: #fff;
          font-size: 18px;
          font-weight: 600;
          text-align: center;
          letter-spacing: 2px;
          box-shadow: 20px 20px 30px rgba(0, 0, 0, 0.2) -20px -20px 30px
            rgba(33, 161, 241, 1);
          transition: all 0.3 ease-out;

          &:active {
            transform: translateY(1px);
            box-shadow: 0 0 0 rgba(0, 0, 0, 0.2), 0 0 0 rgba(230, 58, 51, 0.8),
              inset 10px 10px 20px rgba(0, 0, 0, 0.1),
              inset -10px -10px 20px rgba(33, 161, 241, 1);
            font-size: 17px;
          }
        }
      }
    }
  }
}
</style>